CMAKE_MINIMUM_REQUIRED ( VERSION 2.8.12)

SET ( PROJECT_NAME "refcnt_test")
SET ( PROJECT_SRC "refcnt_SRC")

PROJECT( ${PROJECT_NAME} )

## set output directory
SET ( CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/../lib )
SET ( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/../lib )
SET ( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/../bin )

SET ( HEADER_FILES
  "${CMAKE_SOURCE_DIR}/../include/refcnt.hpp"
)

file ( GLOB_RECURSE PROJECT_SRC
  "${CMAKE_SOURCE_DIR}/../src/refcnt.cpp"
)

ADD_EXECUTABLE ( ${PROJECT_NAME}  ${PROJECT_SRC} ${HEADER_FILES} )

TARGET_INCLUDE_DIRECTORIES( ${PROJECT_NAME} PRIVATE
  ${CMAKE_SOURCE_DIR}/../include
)

TARGET_LINK_LIBRARIES ( ${PROJECT_NAME}
  "pthread"
)

SET ( GCC_COMPILE_FLAGS "-Wall -O3 -std=c++2a -g" )
SET ( GCC_LINK_FLAGS    "" )

SET( CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} ${GCC_COMPILE_FLAGS}" )
SET( CMAKE_EXE_LINKER_FLAGS  "${CMAKE_EXE_LINKER_FLAGS} ${GCC_LINK_FLAGS}" )
